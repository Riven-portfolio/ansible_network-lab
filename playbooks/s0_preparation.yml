---
# S0 | æº–å‚™èˆ‡åŸºç·š
# ç›®æ¨™: ç’°å¢ƒå°±ç·’ï¼Œé¿å…å¾ŒçºŒå¡æ­»

- name: åŸºç¤é…ç½®æª¢æŸ¥
  hosts: cisco_devices
  gather_facts: no
  tasks:
    - name: æ¸¬è©¦é€£æ¥
      cisco.ios.ios_command:
        commands:
          - show version
      register: version_output
      ignore_errors: yes

    - name: é¡¯ç¤ºè¨­å‚™è³‡è¨Š
      debug:
        msg:
          - "âœ… {{ inventory_hostname }} é€£æ¥æˆåŠŸ"
          - "ç‰ˆæœ¬: {{ version_output.stdout_lines[0] | default('N/A') }}"
      when: version_output is succeeded

    - name: é€£æ¥å¤±æ•—è­¦å‘Š
      debug:
        msg:
          - "âŒ {{ inventory_hostname }} é€£æ¥å¤±æ•—"
          - "è«‹æª¢æŸ¥: IP åœ°å€ã€SSH/Telnet è¨­å®šã€èªè­‰è³‡è¨Š"
      when: version_output is failed

- name: åˆå§‹åŒ–åŸºæœ¬é…ç½®
  hosts: cisco_devices
  gather_facts: no
  tasks:
    - name: è¨­å®š Hostname
      cisco.ios.ios_config:
        lines:
          - hostname {{ inventory_hostname }}

    - name: åŸºæœ¬è¨­å®š (å…¨å±€)
      cisco.ios.ios_config:
        lines:
          - no ip domain-lookup
          - service password-encryption

    - name: é…ç½® Console Line
      cisco.ios.ios_config:
        lines:
          - exec-timeout 0 0
          - logging synchronous
        parents:
          - line con 0

    - name: é…ç½® VTY Lines
      cisco.ios.ios_config:
        lines:
          - exec-timeout 15 0
          - logging synchronous
          - transport input all
        parents:
          - line vty 0 4

    - name: å•Ÿç”¨ IP Routing (è·¯ç”±å™¨)
      cisco.ios.ios_config:
        lines:
          - ip routing
      when: inventory_hostname in groups['hq_routers'] or inventory_hostname in groups['branch_routers'] or inventory_hostname in groups['isp']

- name: ç’°å¢ƒæª¢æŸ¥å ±å‘Š
  hosts: localhost
  gather_facts: no
  tasks:
    - name: é¡¯ç¤ºæº–å‚™éšæ®µå®Œæˆè¨Šæ¯
      debug:
        msg:
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          - "  S0 æº–å‚™éšæ®µå®Œæˆ"
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          - ""
          - "âœ… å·²å®Œæˆ:"
          - "  â€¢ é€£æ¥æ¸¬è©¦"
          - "  â€¢ Hostname è¨­å®š"
          - "  â€¢ åŸºæœ¬é…ç½®"
          - "  â€¢ IP Routing å•Ÿç”¨"
          - ""
          - "ğŸ“‹ ä¸‹ä¸€æ­¥:"
          - "  åŸ·è¡Œ: ansible-playbook playbooks/s1_hq_vlan_hsrp.yml"
          - ""
          - "ğŸ’¡ æç¤º:"
          - "  â€¢ ä¾åºåŸ·è¡Œ S1-S8 éšæ®µ"
          - "  â€¢ æ¯éšæ®µå®Œæˆå¾Œé€²è¡Œé©—è­‰"
          - "  â€¢ ä½¿ç”¨ --tags å¯åŸ·è¡Œç‰¹å®šéƒ¨åˆ†"
